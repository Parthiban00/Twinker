<ion-header class="ion-no-border">
  <ion-toolbar color="primary" no-border>
      <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
      </ion-buttons>
    <ion-title style="font-family: lato;">
      Restaurant Orders
    </ion-title>
    <ion-buttons slot="end">
      <ion-button (click)="RedirectToHome()">
      <ion-icon name="apps"></ion-icon>
      </ion-button>
          </ion-buttons>
  </ion-toolbar>
  <div >


  <ion-item>
    <ion-label>Restaurant</ion-label>
    <ion-select interface="popover"  [(ngModel)]="selectedValue" (ionChange)="onChange(selectedValue)">
      <ion-select-option *ngFor="let rest of restaurants" value={{rest._id}}>{{rest.RestaurantName}}</ion-select-option>

    </ion-select>
  </ion-item>


  <div class="search">

    <ion-searchbar  debounce="500" [(ngModel)]="searchHotel" (ionChange)="SearchChange($event)"></ion-searchbar><ion-button fill="clear"><ion-icon name="filter"></ion-icon></ion-button>



</div>
<div class="datepicker-card">
  <ion-card>
<ion-label>Date:&nbsp;{{myDate}}</ion-label><ion-datetime style="display: none;" #datePicker [max]="today" (ionChange)="GetDate()" [(ngModel)]="myDate"></ion-datetime>
</ion-card>
</div>

    <ion-segment scrollable [(ngModel)]='default' color="primary" (ionChange)="segmentChanged($event)">
      <ion-segment-button  value="Placed">
        Placed
      </ion-segment-button>
      <ion-segment-button  value="Accepted">
        Accepted
      </ion-segment-button>
      <ion-segment-button  value="Ready">
        Delivery Accept
      </ion-segment-button>
      <ion-segment-button  value="Pending">
        Delivery Pending
      </ion-segment-button>
      <ion-segment-button  value="Completed">
        Completed
      </ion-segment-button>


    </ion-segment>
    </div>


</ion-header>
<ion-content >
  <ion-refresher (ionRefresh)="doRefresh($event)" slot="fixed" pullFactor="0.5" pullMin="100" pullMax="200">
    <ion-refresher-content>
</ion-refresher-content>
</ion-refresher>
  <div *ngIf="default=='Placed'">


  <div *ngFor="let orders of searchedItem;let i=index" style="margin-top: 5px;">

    <mat-accordion class="example-headers-align" style="padding: 0px;"  *ngIf="orders.Status=='Placed'">


        <mat-expansion-panel hideToggle>
            <mat-expansion-panel-header>
              <mat-panel-title style="font-size: small;">
            ORD_ID-{{orders._id.substr(orders._id.length - 3)}}
              </mat-panel-title>
              <mat-panel-description style="font-size: small;">
               Rs. {{orders.ItemTotal}}.00
                <mat-icon>keyboard_arrow_down</mat-icon>
              </mat-panel-description>
            </mat-expansion-panel-header>


          <mat-accordion>
            <mat-expansion-panel (opened)="panelOpenState = true"
            (closed)="panelOpenState = false">
<mat-expansion-panel-header>
<mat-panel-title  style="font-size: small;">
Order Details

</mat-panel-title>
<mat-panel-description  style="font-size: small;">
<!-- Currently I am {{panelOpenState ? 'open' : 'closed'}}-->
<!-- {{orders.OrderId}} -->
</mat-panel-description>
</mat-expansion-panel-header>

<div class="container" style="font-size: 12px;">

<ion-card>
<ion-card-content>
<ion-row>
<ion-col>
Order Type
</ion-col>
<ion-col style="font-size: 12px;">
Delivery
</ion-col>
</ion-row>
<ion-row>
<ion-col>
Payment Type
</ion-col>
<ion-col style="font-size: 12px;">
COD (Cash On Delivery)
</ion-col>
</ion-row>
<ion-row>
<ion-col>
Order Status
</ion-col>
<ion-col style="font-size: 12px;">
Delivered
</ion-col>
</ion-row>
</ion-card-content>
</ion-card>
</div>

</mat-expansion-panel>

</mat-accordion>


<mat-accordion>
<mat-expansion-panel (opened)="panelOpenState = true"
             (closed)="panelOpenState = false">
<mat-expansion-panel-header>
<mat-panel-title  style="font-size: small;">
Item Details
</mat-panel-title>
<mat-panel-description  style="font-size: small;">
<!-- Currently I am {{panelOpenState ? 'open' : 'closed'}}-->

</mat-panel-description>
</mat-expansion-panel-header>


<ion-row style="font-size: 14px;">
<ion-col>
Item
</ion-col>
<ion-col>
Price
</ion-col>
<ion-col>
Quantity
</ion-col>
<ion-col>
Amount
</ion-col>
</ion-row>

<ion-row style="font-size: 12px;" *ngFor="let items of orders.ItemDetails;let j=index" >
<ion-col *ngIf="items.RestaurantId==orders.RestaurantId">
{{items.ProductName}}
</ion-col>
<ion-col *ngIf="items.RestaurantId==orders.RestaurantId">
{{items.Price}}
</ion-col>
<ion-col *ngIf="items.RestaurantId==orders.RestaurantId">
{{items.ItemCount}}
</ion-col>
<ion-col *ngIf="items.RestaurantId==orders.RestaurantId">
{{items.Amount}}
</ion-col>
</ion-row>
</mat-expansion-panel>
</mat-accordion>

<mat-accordion>
<mat-expansion-panel (opened)="panelOpenState = true"
                 (closed)="panelOpenState = false">
<mat-expansion-panel-header>
<mat-panel-title  style="font-size: small;">
Bill Details
</mat-panel-title>
<mat-panel-description  style="font-size: small;">
<!-- Currently I am {{panelOpenState ? 'open' : 'closed'}}-->

</mat-panel-description>
</mat-expansion-panel-header>

<div style="font-size:12px;">
  <ion-card>
    <ion-card-content>
<ion-row>
  <ion-col>
    Item Total
  </ion-col>
  <ion-col style="font-size: 12px;">
    {{orders.ItemTotal}}
  </ion-col>
</ion-row>
<ion-row>
  <ion-col>
    Delivery Partner Fee
  </ion-col>
  <ion-col style="font-size: 12px;"  >
    {{orders.DeliveryPartnerFee.toFixed(2)}}
  </ion-col>
</ion-row>
<ion-row>
  <ion-col>
    Taxes and Charges
  </ion-col>
  <ion-col style="font-size: 12px;">
    {{orders.TaxesAndCharges}}.00
  </ion-col >
</ion-row>
<ion-row>
  <ion-col>
    Total Amount
  </ion-col>
  <ion-col style="font-size: 12px;">
    {{orders.TotalAmount.toFixed(2)}}
  </ion-col>
</ion-row>
</ion-card-content>
</ion-card>
</div>




</mat-expansion-panel>
</mat-accordion>

<mat-accordion>
<mat-expansion-panel (opened)="panelOpenState = true"
                     (closed)="panelOpenState = false">
  <mat-expansion-panel-header>
    <mat-panel-title  style="font-size: small;">
    Delivery Details
    </mat-panel-title>
    <mat-panel-description  style="font-size: small;">
    <!-- Currently I am {{panelOpenState ? 'open' : 'closed'}}-->

    </mat-panel-description>
  </mat-expansion-panel-header>


  <div class="container" style="font-size: 12px;">

    <ion-card>
      <ion-card-content>
    <ion-row>
      <ion-col>
        Name
      </ion-col>
      <ion-col style="font-size: 12px;">
        {{orders.UserName}}
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col>
        Mobile No.
      </ion-col>
      <ion-col style="font-size: 12px;">
        {{orders.MobileNo}}
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col>
        Address
      </ion-col>
      <ion-col style="font-size: 12px;">
        {{orders.Address}}
      </ion-col>
    </ion-row>

    </ion-card-content>
    </ion-card>
    </div>




</mat-expansion-panel>
</mat-accordion>


            <mat-action-row style="padding-right: 50px;">
              <!-- <button mat-button color="warn" (click)="prevStep()">Cancel</button> -->
              <ion-text  style="position: absolute;margin-top:8px;left: 0; margin-left: 10px;color: crimson;font-size: small;">Delivery:&nbsp;<span>{{orders.DeliveryPartnerStatus}}</span></ion-text>
              <button mat-button color="primary" (click)="nextStep(orders._id,orders.RestaurantId)">Accept</button>
            </mat-action-row>
          </mat-expansion-panel>
        </mat-accordion>

        </div>
      </div>
        <div *ngIf="default=='Accepted'">
          <div *ngFor="let orders of searchedItem;let i=index" style="margin-top: 5px;">
            <mat-accordion class="example-headers-align" style="padding: 0px;"  *ngIf="orders.Status=='Accepted by Restaurant Owner'">

                <mat-expansion-panel hideToggle>
                    <mat-expansion-panel-header>
                      <mat-panel-title style="font-size: small;">
                     ORD_ID-{{orders._id.substr(orders._id.length - 3)}}
                      </mat-panel-title>
                      <mat-panel-description style="font-size: small;">
                       Rs. {{orders.ItemTotal}}.00
                        <mat-icon>keyboard_arrow_down</mat-icon>
                      </mat-panel-description>
                    </mat-expansion-panel-header>




                  <mat-accordion>
                    <mat-expansion-panel (opened)="panelOpenState = true"
                    (closed)="panelOpenState = false">
  <mat-expansion-panel-header>
   <mat-panel-title  style="font-size: small;">
   Order Details

   </mat-panel-title>
   <mat-panel-description  style="font-size: small;">
   <!-- Currently I am {{panelOpenState ? 'open' : 'closed'}}-->
  <!-- {{orders.OrderId}} -->
   </mat-panel-description>
  </mat-expansion-panel-header>

  <div class="container" style="font-size: 12px;">

    <ion-card>
      <ion-card-content>
    <ion-row>
      <ion-col>
        Order Type
      </ion-col>
      <ion-col style="font-size: 12px;">
        Delivery
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col>
        Payment Type
      </ion-col>
      <ion-col style="font-size: 12px;">
        COD (Cash On Delivery)
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col>
        Order Status
      </ion-col>
      <ion-col style="font-size: 12px;">
        Delivered
      </ion-col>
    </ion-row>
    </ion-card-content>
    </ion-card>
    </div>

  </mat-expansion-panel>

  </mat-accordion>


  <mat-accordion>
  <mat-expansion-panel (opened)="panelOpenState = true"
                     (closed)="panelOpenState = false">
  <mat-expansion-panel-header>
    <mat-panel-title  style="font-size: small;">
    Item Details
    </mat-panel-title>
    <mat-panel-description  style="font-size: small;">
    <!-- Currently I am {{panelOpenState ? 'open' : 'closed'}}-->

    </mat-panel-description>
  </mat-expansion-panel-header>


  <ion-row style="font-size: 14px;">
    <ion-col>
      Item
    </ion-col>
    <ion-col>
      Price
    </ion-col>
    <ion-col>
      Quantity
    </ion-col>
    <ion-col>
      Amount
    </ion-col>
  </ion-row>

  <ion-row style="font-size: 12px;" *ngFor="let items of orders.ItemDetails;let j=index" >
    <ion-col *ngIf="items.RestaurantId==orders.RestaurantId">
  {{items.ProductName}}
    </ion-col>
    <ion-col *ngIf="items.RestaurantId==orders.RestaurantId">
       {{items.Price}}
    </ion-col>
    <ion-col *ngIf="items.RestaurantId==orders.RestaurantId">
    {{items.ItemCount}}
    </ion-col>
    <ion-col *ngIf="items.RestaurantId==orders.RestaurantId">
       {{items.Amount}}
    </ion-col>
  </ion-row>
  </mat-expansion-panel>
  </mat-accordion>

  <mat-accordion>
    <mat-expansion-panel (opened)="panelOpenState = true"
                         (closed)="panelOpenState = false">
      <mat-expansion-panel-header>
        <mat-panel-title  style="font-size: small;">
        Bill Details
        </mat-panel-title>
        <mat-panel-description  style="font-size: small;">
        <!-- Currently I am {{panelOpenState ? 'open' : 'closed'}}-->

        </mat-panel-description>
      </mat-expansion-panel-header>

        <div style="font-size:12px;">
          <ion-card>
            <ion-card-content>
        <ion-row>
          <ion-col>
            Item Total
          </ion-col>
          <ion-col style="font-size: 12px;">
            {{orders.ItemTotal}}
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col>
            Delivery Partner Fee
          </ion-col>
          <ion-col style="font-size: 12px;"  >
            {{orders.DeliveryPartnerFee.toFixed(2)}}
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col>
            Taxes and Charges
          </ion-col>
          <ion-col style="font-size: 12px;">
            {{orders.TaxesAndCharges}}.00
          </ion-col >
        </ion-row>
        <ion-row>
          <ion-col>
            Total Amount
          </ion-col>
          <ion-col style="font-size: 12px;">
            {{orders.TotalAmount.toFixed(2)}}
          </ion-col>
        </ion-row>
        </ion-card-content>
        </ion-card>
        </div>




    </mat-expansion-panel>
    </mat-accordion>

    <mat-accordion>
        <mat-expansion-panel (opened)="panelOpenState = true"
                             (closed)="panelOpenState = false">
          <mat-expansion-panel-header>
            <mat-panel-title  style="font-size: small;">
            Delivery Details
            </mat-panel-title>
            <mat-panel-description  style="font-size: small;">
            <!-- Currently I am {{panelOpenState ? 'open' : 'closed'}}-->

            </mat-panel-description>
          </mat-expansion-panel-header>


          <div class="container" style="font-size: 12px;">

            <ion-card>
              <ion-card-content>
            <ion-row>
              <ion-col>
                Name
              </ion-col>
              <ion-col style="font-size: 12px;">
                {{orders.UserName}}
              </ion-col>
            </ion-row>
            <ion-row>
              <ion-col>
                Mobile No.
              </ion-col>
              <ion-col style="font-size: 12px;">
                {{orders.MobileNo}}
              </ion-col>
            </ion-row>
            <ion-row>
              <ion-col>
                Address
              </ion-col>
              <ion-col style="font-size: 12px;">
                {{orders.Address}}
              </ion-col>
            </ion-row>

            </ion-card-content>
            </ion-card>
            </div>




        </mat-expansion-panel>
        </mat-accordion>


                    <mat-action-row style="padding-right: 50px;">
                      <!-- <button mat-button color="warn" (click)="prevStep()">Cancel</button> -->
                      <ion-text  style="position: absolute;margin-top:8px;left: 0; margin-left: 10px;color: crimson;font-size: small;">Delivery:&nbsp;<span>{{orders.DeliveryPartnerStatus}}</span></ion-text>
                      <button mat-button color="primary" (click)="Ready(orders._id,orders.RestaurantId)">Ready</button>
                    </mat-action-row>
                  </mat-expansion-panel>
                </mat-accordion>

                </div>
          </div>

          <div *ngIf="default=='Ready'">
            <div *ngFor="let orders of searchedItem;let i=index" style="margin-top: 5px;">
              <mat-accordion class="example-headers-align" style="padding: 0px;"  *ngIf="orders.Status=='Ready' && orders.DeliveryPartnerStatus=='Placed by Customer' ">

                  <mat-expansion-panel hideToggle>
                      <mat-expansion-panel-header>
                        <mat-panel-title style="font-size: small;">
                       ORD_ID-{{orders._id.substr(orders._id.length - 3)}}
                        </mat-panel-title>
                        <mat-panel-description style="font-size: small;">
                         Rs. {{orders.ItemTotal}}.00
                          <mat-icon>keyboard_arrow_down</mat-icon>
                        </mat-panel-description>
                      </mat-expansion-panel-header>


                      <mat-accordion>
                        <mat-expansion-panel (opened)="panelOpenState = true"
                        (closed)="panelOpenState = false">
      <mat-expansion-panel-header>
       <mat-panel-title  style="font-size: small;">
       Order Details

       </mat-panel-title>
       <mat-panel-description  style="font-size: small;">
       <!-- Currently I am {{panelOpenState ? 'open' : 'closed'}}-->
      <!-- {{orders.OrderId}} -->
       </mat-panel-description>
      </mat-expansion-panel-header>

      <div class="container" style="font-size: 12px;">

        <ion-card>
          <ion-card-content>
        <ion-row>
          <ion-col>
            Order Type
          </ion-col>
          <ion-col style="font-size: 12px;">
            Delivery
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col>
            Payment Type
          </ion-col>
          <ion-col style="font-size: 12px;">
            COD (Cash On Delivery)
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col>
            Order Status
          </ion-col>
          <ion-col style="font-size: 12px;">
            Delivered
          </ion-col>
        </ion-row>
        </ion-card-content>
        </ion-card>
        </div>

      </mat-expansion-panel>

      </mat-accordion>


      <mat-accordion>
      <mat-expansion-panel (opened)="panelOpenState = true"
                         (closed)="panelOpenState = false">
      <mat-expansion-panel-header>
        <mat-panel-title  style="font-size: small;">
        Item Details
        </mat-panel-title>
        <mat-panel-description  style="font-size: small;">
        <!-- Currently I am {{panelOpenState ? 'open' : 'closed'}}-->

        </mat-panel-description>
      </mat-expansion-panel-header>


      <ion-row style="font-size: 14px;">
        <ion-col>
          Item
        </ion-col>
        <ion-col>
          Price
        </ion-col>
        <ion-col>
          Quantity
        </ion-col>
        <ion-col>
          Amount
        </ion-col>
      </ion-row>

      <ion-row style="font-size: 12px;" *ngFor="let items of orders.ItemDetails;let j=index" >
        <ion-col *ngIf="items.RestaurantId==orders.RestaurantId">
      {{items.ProductName}}
        </ion-col>
        <ion-col *ngIf="items.RestaurantId==orders.RestaurantId">
           {{items.Price}}
        </ion-col>
        <ion-col *ngIf="items.RestaurantId==orders.RestaurantId">
        {{items.ItemCount}}
        </ion-col>
        <ion-col *ngIf="items.RestaurantId==orders.RestaurantId">
           {{items.Amount}}
        </ion-col>
      </ion-row>
      </mat-expansion-panel>
      </mat-accordion>

      <mat-accordion>
        <mat-expansion-panel (opened)="panelOpenState = true"
                             (closed)="panelOpenState = false">
          <mat-expansion-panel-header>
            <mat-panel-title  style="font-size: small;">
            Bill Details
            </mat-panel-title>
            <mat-panel-description  style="font-size: small;">
            <!-- Currently I am {{panelOpenState ? 'open' : 'closed'}}-->

            </mat-panel-description>
          </mat-expansion-panel-header>

            <div style="font-size:12px;">
              <ion-card>
                <ion-card-content>
            <ion-row>
              <ion-col>
                Item Total
              </ion-col>
              <ion-col style="font-size: 12px;">
                {{orders.ItemTotal}}
              </ion-col>
            </ion-row>
            <ion-row>
              <ion-col>
                Delivery Partner Fee
              </ion-col>
              <ion-col style="font-size: 12px;"  >
                {{orders.DeliveryPartnerFee.toFixed(2)}}
              </ion-col>
            </ion-row>
            <ion-row>
              <ion-col>
                Taxes and Charges
              </ion-col>
              <ion-col style="font-size: 12px;">
                {{orders.TaxesAndCharges}}.00
              </ion-col >
            </ion-row>
            <ion-row>
              <ion-col>
                Total Amount
              </ion-col>
              <ion-col style="font-size: 12px;">
                {{orders.TotalAmount.toFixed(2)}}
              </ion-col>
            </ion-row>
            </ion-card-content>
            </ion-card>
            </div>




        </mat-expansion-panel>
        </mat-accordion>

        <mat-accordion>
            <mat-expansion-panel (opened)="panelOpenState = true"
                                 (closed)="panelOpenState = false">
              <mat-expansion-panel-header>
                <mat-panel-title  style="font-size: small;">
                Delivery Details
                </mat-panel-title>
                <mat-panel-description  style="font-size: small;">
                <!-- Currently I am {{panelOpenState ? 'open' : 'closed'}}-->

                </mat-panel-description>
              </mat-expansion-panel-header>


              <div class="container" style="font-size: 12px;">

                <ion-card>
                  <ion-card-content>
                <ion-row>
                  <ion-col>
                    Name
                  </ion-col>
                  <ion-col style="font-size: 12px;">
                    {{orders.UserName}}
                  </ion-col>
                </ion-row>
                <ion-row>
                  <ion-col>
                    Mobile No.
                  </ion-col>
                  <ion-col style="font-size: 12px;">
                    {{orders.MobileNo}}
                  </ion-col>
                </ion-row>
                <ion-row>
                  <ion-col>
                    Address
                  </ion-col>
                  <ion-col style="font-size: 12px;">
                    {{orders.Address}}
                  </ion-col>
                </ion-row>

                </ion-card-content>
                </ion-card>
                </div>




            </mat-expansion-panel>
            </mat-accordion>





                      <mat-action-row style="align-content: center;padding-right: 50px;" >
                        <!-- <button mat-button color="warn" (click)="prevStep()">Cancel</button>
                        <button mat-button color="primary" (click)="Handled(orders._id,orders.RestaurantId)">Handled</button> -->
                        <p style="color: red;" >Waiting for Delivery Partner Accept</p>

                      </mat-action-row>
                    </mat-expansion-panel>
                  </mat-accordion>

                  </div>
          </div >
          <div *ngIf="default=='Pending'">
            <div *ngFor="let orders of searchedItem;let i=index" style="margin-top: 5px;">
              <mat-accordion class="example-headers-align" style="padding: 0px;"  *ngIf="orders.Status=='Ready' && orders.DeliveryPartnerStatus=='Accepted by Delivery Partner'">

                  <mat-expansion-panel hideToggle>
                      <mat-expansion-panel-header>
                        <mat-panel-title style="font-size: small;">
                       ORD_ID-{{orders._id.substr(orders._id.length - 3)}}
                        </mat-panel-title>
                        <mat-panel-description style="font-size: small;">
                         Rs. {{orders.ItemTotal}}.00
                          <mat-icon>keyboard_arrow_down</mat-icon>
                        </mat-panel-description>
                      </mat-expansion-panel-header>

                      <mat-accordion>
                        <mat-expansion-panel (opened)="panelOpenState = true"
                        (closed)="panelOpenState = false">
      <mat-expansion-panel-header>
       <mat-panel-title  style="font-size: small;">
       Order Details

       </mat-panel-title>
       <mat-panel-description  style="font-size: small;">
       <!-- Currently I am {{panelOpenState ? 'open' : 'closed'}}-->
      <!-- {{orders.OrderId}} -->
       </mat-panel-description>
      </mat-expansion-panel-header>

      <div class="container" style="font-size: 12px;">

        <ion-card>
          <ion-card-content>
        <ion-row>
          <ion-col>
            Order Type
          </ion-col>
          <ion-col style="font-size: 12px;">
            Delivery
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col>
            Payment Type
          </ion-col>
          <ion-col style="font-size: 12px;">
            COD (Cash On Delivery)
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col>
            Order Status
          </ion-col>
          <ion-col style="font-size: 12px;">
            Delivered
          </ion-col>
        </ion-row>
        </ion-card-content>
        </ion-card>
        </div>

      </mat-expansion-panel>

      </mat-accordion>


      <mat-accordion>
      <mat-expansion-panel (opened)="panelOpenState = true"
                         (closed)="panelOpenState = false">
      <mat-expansion-panel-header>
        <mat-panel-title  style="font-size: small;">
        Item Details
        </mat-panel-title>
        <mat-panel-description  style="font-size: small;">
        <!-- Currently I am {{panelOpenState ? 'open' : 'closed'}}-->

        </mat-panel-description>
      </mat-expansion-panel-header>


      <ion-row style="font-size: 14px;">
        <ion-col>
          Item
        </ion-col>
        <ion-col>
          Price
        </ion-col>
        <ion-col>
          Quantity
        </ion-col>
        <ion-col>
          Amount
        </ion-col>
      </ion-row>

      <ion-row style="font-size: 12px;" *ngFor="let items of orders.ItemDetails;let j=index" >
        <ion-col *ngIf="items.RestaurantId==orders.RestaurantId">
      {{items.ProductName}}
        </ion-col>
        <ion-col *ngIf="items.RestaurantId==orders.RestaurantId">
           {{items.Price}}
        </ion-col>
        <ion-col *ngIf="items.RestaurantId==orders.RestaurantId">
        {{items.ItemCount}}
        </ion-col>
        <ion-col *ngIf="items.RestaurantId==orders.RestaurantId">
           {{items.Amount}}
        </ion-col>
      </ion-row>
      </mat-expansion-panel>
      </mat-accordion>

      <mat-accordion>
        <mat-expansion-panel (opened)="panelOpenState = true"
                             (closed)="panelOpenState = false">
          <mat-expansion-panel-header>
            <mat-panel-title  style="font-size: small;">
            Bill Details
            </mat-panel-title>
            <mat-panel-description  style="font-size: small;">
            <!-- Currently I am {{panelOpenState ? 'open' : 'closed'}}-->

            </mat-panel-description>
          </mat-expansion-panel-header>

            <div style="font-size:12px;">
              <ion-card>
                <ion-card-content>
            <ion-row>
              <ion-col>
                Item Total
              </ion-col>
              <ion-col style="font-size: 12px;">
                {{orders.ItemTotal}}
              </ion-col>
            </ion-row>
            <ion-row>
              <ion-col>
                Delivery Partner Fee
              </ion-col>
              <ion-col style="font-size: 12px;"  >
                {{orders.DeliveryPartnerFee.toFixed(2)}}
              </ion-col>
            </ion-row>
            <ion-row>
              <ion-col>
                Taxes and Charges
              </ion-col>
              <ion-col style="font-size: 12px;">
                {{orders.TaxesAndCharges}}.00
              </ion-col >
            </ion-row>
            <ion-row>
              <ion-col>
                Total Amount
              </ion-col>
              <ion-col style="font-size: 12px;">
                {{orders.TotalAmount.toFixed(2)}}
              </ion-col>
            </ion-row>
            </ion-card-content>
            </ion-card>
            </div>




        </mat-expansion-panel>
        </mat-accordion>

        <mat-accordion>
            <mat-expansion-panel (opened)="panelOpenState = true"
                                 (closed)="panelOpenState = false">
              <mat-expansion-panel-header>
                <mat-panel-title  style="font-size: small;">
                Delivery Details
                </mat-panel-title>
                <mat-panel-description  style="font-size: small;">
                <!-- Currently I am {{panelOpenState ? 'open' : 'closed'}}-->

                </mat-panel-description>
              </mat-expansion-panel-header>


              <div class="container" style="font-size: 12px;">

                <ion-card>
                  <ion-card-content>
                <ion-row>
                  <ion-col>
                    Name
                  </ion-col>
                  <ion-col style="font-size: 12px;">
                    {{orders.UserName}}
                  </ion-col>
                </ion-row>
                <ion-row>
                  <ion-col>
                    Mobile No.
                  </ion-col>
                  <ion-col style="font-size: 12px;">
                    {{orders.MobileNo}}
                  </ion-col>
                </ion-row>
                <ion-row>
                  <ion-col>
                    Address
                  </ion-col>
                  <ion-col style="font-size: 12px;">
                    {{orders.Address}}
                  </ion-col>
                </ion-row>

                </ion-card-content>
                </ion-card>
                </div>




            </mat-expansion-panel>
            </mat-accordion>
            <mat-accordion>
              <mat-expansion-panel (opened)="panelOpenState = true"
                                   (closed)="panelOpenState = false">
                <mat-expansion-panel-header>
                  <mat-panel-title  style="font-size: small;">
                  Delivery Partner Details
                  </mat-panel-title>
                  <mat-panel-description  style="font-size: small;">
                  <!-- Currently I am {{panelOpenState ? 'open' : 'closed'}}-->

                  </mat-panel-description>
                </mat-expansion-panel-header>


                <div class="container" style="font-size: 12px;">

                  <ion-card>
                    <ion-card-content>
                  <ion-row>
                    <ion-col>
                      Name
                    </ion-col>
                    <ion-col style="font-size: 12px;">
                      {{orders.DeliveryPartnerDetails.FirstName}}
                    </ion-col>
                  </ion-row>
                  <ion-row>
                    <ion-col>
                      Mobile No.
                    </ion-col>
                    <ion-col style="font-size: 12px;">
                      {{orders.DeliveryPartnerDetails.MobileNo}}
                    </ion-col>
                  </ion-row>


                  </ion-card-content>
                  </ion-card>
                  </div>




              </mat-expansion-panel>
              </mat-accordion>


                      <mat-action-row style="align-content: center;padding-right: 50px;">
                        <!-- <button mat-button color="warn" (click)="prevStep()">Cancel</button>
                        <button mat-button color="primary" (click)="Handled(orders._id,orders.RestaurantId)">Handled</button> -->
                        <p style="color: green;" >Accepted by Delivery Partner (Dlivery On Process...)</p>

                      </mat-action-row>
                    </mat-expansion-panel>
                  </mat-accordion>

                  </div>
          </div>
          <div *ngIf="default=='Completed'">

            <div *ngFor="let orders of searchedItem;let i=index" style="margin-top: 5px;">
              <mat-accordion class="example-headers-align" style="padding: 0px;"  *ngIf="orders.Status=='Completed'">

                  <mat-expansion-panel hideToggle>
                      <mat-expansion-panel-header>
                        <mat-panel-title style="font-size: small;">
                       ORD_ID-{{orders._id.substr(orders._id.length - 3)}}
                        </mat-panel-title>
                        <mat-panel-description style="font-size: small;">
                         Rs. {{orders.ItemTotal}}.00
                          <mat-icon>keyboard_arrow_down</mat-icon>
                        </mat-panel-description>
                      </mat-expansion-panel-header>


                      <mat-accordion>
                        <mat-expansion-panel (opened)="panelOpenState = true"
                        (closed)="panelOpenState = false">
      <mat-expansion-panel-header>
       <mat-panel-title  style="font-size: small;">
       Order Details

       </mat-panel-title>
       <mat-panel-description  style="font-size: small;">
       <!-- Currently I am {{panelOpenState ? 'open' : 'closed'}}-->
      <!-- {{orders.OrderId}} -->
       </mat-panel-description>
      </mat-expansion-panel-header>

      <div class="container" style="font-size: 12px;">

        <ion-card>
          <ion-card-content>
        <ion-row>
          <ion-col>
            Order Type
          </ion-col>
          <ion-col style="font-size: 12px;">
            Delivery
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col>
            Payment Type
          </ion-col>
          <ion-col style="font-size: 12px;">
            COD (Cash On Delivery)
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col>
            Order Status
          </ion-col>
          <ion-col style="font-size: 12px;">
            Delivered
          </ion-col>
        </ion-row>
        </ion-card-content>
        </ion-card>
        </div>

      </mat-expansion-panel>

      </mat-accordion>


      <mat-accordion>
      <mat-expansion-panel (opened)="panelOpenState = true"
                         (closed)="panelOpenState = false">
      <mat-expansion-panel-header>
        <mat-panel-title  style="font-size: small;">
        Item Details
        </mat-panel-title>
        <mat-panel-description  style="font-size: small;">
        <!-- Currently I am {{panelOpenState ? 'open' : 'closed'}}-->

        </mat-panel-description>
      </mat-expansion-panel-header>


      <ion-row style="font-size: 14px;">
        <ion-col>
          Item
        </ion-col>
        <ion-col>
          Price
        </ion-col>
        <ion-col>
          Quantity
        </ion-col>
        <ion-col>
          Amount
        </ion-col>
      </ion-row>

      <ion-row style="font-size: 12px;" *ngFor="let items of orders.ItemDetails;let j=index" >
        <ion-col *ngIf="items.RestaurantId==orders.RestaurantId">
      {{items.ProductName}}
        </ion-col>
        <ion-col *ngIf="items.RestaurantId==orders.RestaurantId">
           {{items.Price}}
        </ion-col>
        <ion-col *ngIf="items.RestaurantId==orders.RestaurantId">
        {{items.ItemCount}}
        </ion-col>
        <ion-col *ngIf="items.RestaurantId==orders.RestaurantId">
           {{items.Amount}}
        </ion-col>
      </ion-row>
      </mat-expansion-panel>
      </mat-accordion>

      <mat-accordion>
        <mat-expansion-panel (opened)="panelOpenState = true"
                             (closed)="panelOpenState = false">
          <mat-expansion-panel-header>
            <mat-panel-title  style="font-size: small;">
            Bill Details
            </mat-panel-title>
            <mat-panel-description  style="font-size: small;">
            <!-- Currently I am {{panelOpenState ? 'open' : 'closed'}}-->

            </mat-panel-description>
          </mat-expansion-panel-header>

            <div style="font-size:12px;">
              <ion-card>
                <ion-card-content>
            <ion-row>
              <ion-col>
                Item Total
              </ion-col>
              <ion-col style="font-size: 12px;">
                {{orders.ItemTotal}}
              </ion-col>
            </ion-row>
            <ion-row>
              <ion-col>
                Delivery Partner Fee
              </ion-col>
              <ion-col style="font-size: 12px;"  >
                {{orders.DeliveryPartnerFee.toFixed(2)}}
              </ion-col>
            </ion-row>
            <ion-row>
              <ion-col>
                Taxes and Charges
              </ion-col>
              <ion-col style="font-size: 12px;">
                {{orders.TaxesAndCharges}}.00
              </ion-col >
            </ion-row>
            <ion-row>
              <ion-col>
                Total Amount
              </ion-col>
              <ion-col style="font-size: 12px;">
                {{orders.TotalAmount.toFixed(2)}}
              </ion-col>
            </ion-row>
            </ion-card-content>
            </ion-card>
            </div>




        </mat-expansion-panel>
        </mat-accordion>

        <mat-accordion>
            <mat-expansion-panel (opened)="panelOpenState = true"
                                 (closed)="panelOpenState = false">
              <mat-expansion-panel-header>
                <mat-panel-title  style="font-size: small;">
                Delivery Details
                </mat-panel-title>
                <mat-panel-description  style="font-size: small;">
                <!-- Currently I am {{panelOpenState ? 'open' : 'closed'}}-->

                </mat-panel-description>
              </mat-expansion-panel-header>


              <div class="container" style="font-size: 12px;">

                <ion-card>
                  <ion-card-content>
                <ion-row>
                  <ion-col>
                    Name
                  </ion-col>
                  <ion-col style="font-size: 12px;">
                    {{orders.UserName}}
                  </ion-col>
                </ion-row>
                <ion-row>
                  <ion-col>
                    Mobile No.
                  </ion-col>
                  <ion-col style="font-size: 12px;">
                    {{orders.MobileNo}}
                  </ion-col>
                </ion-row>
                <ion-row>
                  <ion-col>
                    Address
                  </ion-col>
                  <ion-col style="font-size: 12px;">
                    {{orders.Address}}
                  </ion-col>
                </ion-row>

                </ion-card-content>
                </ion-card>
                </div>




            </mat-expansion-panel>
            </mat-accordion>
            <mat-accordion>
              <mat-expansion-panel (opened)="panelOpenState = true"
                                   (closed)="panelOpenState = false">
                <mat-expansion-panel-header>
                  <mat-panel-title  style="font-size: small;">
                  Delivery Partner Details
                  </mat-panel-title>
                  <mat-panel-description  style="font-size: small;">
                  <!-- Currently I am {{panelOpenState ? 'open' : 'closed'}}-->

                  </mat-panel-description>
                </mat-expansion-panel-header>


                <div class="container" style="font-size: 12px;">

                  <ion-card>
                    <ion-card-content>
                  <ion-row>
                    <ion-col>
                      Name
                    </ion-col>
                    <ion-col style="font-size: 12px;">
                      {{orders.DeliveryPartnerDetails.FirstName}}
                    </ion-col>
                  </ion-row>
                  <ion-row>
                    <ion-col>
                      Mobile No.
                    </ion-col>
                    <ion-col style="font-size: 12px;">
                      {{orders.DeliveryPartnerDetails.MobileNo}}
                    </ion-col>
                  </ion-row>


                  </ion-card-content>
                  </ion-card>
                  </div>




              </mat-expansion-panel>
              </mat-accordion>

                      <mat-action-row style="align-content: center;padding-right: 50px;">
                        <!-- <button mat-button color="warn" (click)="prevStep()">Cancel</button>
                        <button mat-button color="primary" (click)="Handled(orders._id,orders.RestaurantId)">Handled</button> -->
                        <p style="color: green;" >Delivered Successfull...</p>

                      </mat-action-row>
                    </mat-expansion-panel>
                  </mat-accordion>

                  </div>
          </div>
   <ion-fab vertical="bottom" horizontal="end" slot="fixed" >
            <ion-fab-button size="small" >
              <ion-icon name="filter"></ion-icon>
            </ion-fab-button>
             <ion-fab-list side="top">
              <ion-fab-button><ion-icon name="calendar" (click)="datePicker.open()"></ion-icon></ion-fab-button>
              <ion-fab-button><ion-icon name="list" (click)="FilterCancel()"></ion-icon></ion-fab-button>
            </ion-fab-list>
          </ion-fab>
          <!-- <ion-fab vertical="bottom" horizontal="end" edge slot="fixed">
            <ion-fab-button>
              <ion-icon name="settings"></ion-icon>
            </ion-fab-button>
            <ion-fab-list side="end">
              <ion-fab-button><ion-icon name="logo-vimeo"></ion-icon></ion-fab-button>
            </ion-fab-list>
          </ion-fab> -->

</ion-content>
<ion-footer   *ngIf="default=='Completed'" >
  <ion-toolbar color="primary">
    <!-- <ion-title>4 Items</ion-title> -->
<ion-row>
  <ion-col size="3">
    <ion-text class="title">Orders</ion-text>
  </ion-col>
  <ion-col size="3">
    <ion-text class="title">Items</ion-text>
  </ion-col>
  <ion-col size="3">
    <ion-text class="title">Amount</ion-text>
  </ion-col>
  <ion-col size="3">
    <ion-text class="title">To Pay</ion-text>
  </ion-col>

  </ion-row>
  <ion-row>
    <ion-col size="3">
    <ion-text class="description">{{totalCompletedOrders}}</ion-text>
  </ion-col>
  <ion-col size="3">
    <ion-text class="description">{{totalCompletedItems}}</ion-text>
  </ion-col>
  <ion-col size="3">
    <ion-text class="title">{{totalCompletedAmount}}.00 </ion-text>
  </ion-col>
  <ion-col size="3">
    <ion-text class="title">{{toPay}}</ion-text>
  </ion-col>
  <ion-col size="3">



  </ion-col>
  </ion-row>


  </ion-toolbar>
</ion-footer>


